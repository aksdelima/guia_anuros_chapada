---
layout: base
---

{% assign pathSplit = page.path | split: "/" %}
{% assign speciesSlug = pathSplit[1] | replace: ".md", "" | replace: ".html", "" %}

{% for sp in site.data.species %}
  {% if sp.id==speciesSlug %}
    {% assign species = sp %}

    {% assign next_ix = forloop.index %}
    {% assign prev_ix = forloop.index | minus:2 %}
    {% if next_ix == site.data.species.size %}
      {% assign next_ix = 0 %}
    {% endif %}

    {% assign next_sp = site.data.species[next_ix] %}
    {% assign prev_sp = site.data.species[prev_ix] %}

  {% endif %}
{% endfor %}

{% assign familySlug = species.family | slugify %}
{% assign family = site.data.families[familySlug] %}

{% assign habitatPositions = site.data.species_habitat_pos[speciesSlug] %}


{% assign phyto_data = site.data.phytophysiognomies %}

<!-- Subheader -->
<div class="subheader" style="background-color:{{ family.color }}; color:white;">
    <div class="container">
        <h3><a href="{{site.baseurl}}/familias/{{family.scientificName | slugify}}">Família {{ family.scientificName }}</a></h3>
    </div>
</div>


<!-- Page content -->
<div id="{{species.id}}" class="container page-content species-profile">
    <article>
      <section> 
        <div class="row">
          <div class="col-sm-6 col-lg-5">
              <img src="{{site.baseurl}}/assets/img/sp-avatar/{{ species.scientificName | slugify }}.jpg" onError="this.src='https://via.placeholder.com/350x250';">

          </div>

          <div class="col">
            <!-- Navigation -->
            <div class="d-flex justify-content-end">
              <a href="{{site.baseurl}}/especies/{{prev_sp.id}}" class="mx-2" style="color:{{family.color}};"><i class="fa fa-chevron-circle-left fa-2x" aria-hidden="true"></i></a>
              <a href="{{site.baseurl}}/especies/{{next_sp.id}}" class="mx-2" style="color:{{family.color}};"><i class="fa fa-chevron-circle-right fa-2x" aria-hidden="true"></i></a>
            </div>

            <!-- Species info -->
            <div class="d-flex flex-wrap align-items-baseline">
              <h1 class="pr-2"><i>{{ species.scientificName | escape }}</i></h1><h3 class="text-muted">({{ species.scientificNameAuthorship }})</h3>
            </div>
            <h3>{{ species.vernacularNames | join: ", " }}</h3>
            <div class="spbadges">
              {% include spbadges.html species=species %}
            </div>


            <!-- Habitat banner -->
            <div class="habitat-banner d-none d-lg-block" style="margin-top:2.5rem;">
              <img src="{{site.baseurl}}/assets/img/icons/phyto-crop.jpeg" style="">
              <div class="div-overlay" style="background-color: #fff7;">
                <!-- Habit bar -->
                {% assign phytos = "mc,mg,cc,cer,car,ve,ur" | split: "," %}

                {% capture get_xlefts %}
                  {% for p in phytos %}
                  {{phyto_data[p].x_left}}
                  {% endfor %}
                {% endcapture %}

                {% assign x_lefts = get_xlefts | split: " " | sort %}

                {% for phyto in phytos %}
                {% if forloop.last == true %}
                  {% assign x_width = 100 | minus: x_lefts[forloop.index0] %}
                {% else %}
                  {% assign next_index = forloop.index0 | plus: 1 %}
                  {% assign x_width = x_lefts[next_index] | minus: x_lefts[forloop.index0] %}
                {% endif %}

                <div class="position-absolute justify-content-left" style="top:0; left: {{x_lefts[forloop.index0]}}%; width: {{x_width}}%; height:100%;">
                    <div class="ml-2 mr-1" style="font-size:.8rem; font-weight:700; margin-top:-1.6rem;">{{phyto_data[phyto].text}}</div>
                    <!-- circle -->
                    <div class="position-absolute" style="border-left: dotted 3px {{family.color}}; top:-20px; left:0; height:65%; width:100%">
                    </div>
                    <svg height="50%" width="100%" viewBox="0 0 100 100" preserveAspectRatio="xMinYMax meet" style="position:absolute; top:50%;">
                      <circle cx="50" cy="50" r="45" stroke="{{family.color}}" stroke-width="4" fill="none" />
                      <line x1="0" y1="0" x2="20" y2="20" style="stroke: {{family.color}}; stroke-width: 5;" stroke-dasharray="4" />
                    </svg>
                </div>
                {% endfor %}

                <div class="habit-bar float-right">
                    {% if species.atividade_diu==1 %}
                      {% if species.atividade_not==1 %}
                      <img src="{{site.baseurl}}/assets/img/icons/habit_day_night.jpg">
                      {% else %}
                      <img src="{{site.baseurl}}/assets/img/icons/habit_day.jpg">
                      {% endif %}
                    {% elsif species.atividade_not==1 %}
                      <img src="{{site.baseurl}}/assets/img/icons/habit_night.jpg">
                    {% endif %}
                </div>

              </div>
            </div>

            <!-- Months bar -->
            <div class="months-bar d-none d-lg-flex justify-content-end mb-3" style="border-color:{{family.color}}99;">
                <div class="flex-grow-1 px-2 py-1">Ocorrência</div>
                {% assign months =  "Jan,Fev,Mar,Abr,Mai,Jun,Jul,Ago,Set,Out,Nov,Dez" | split: "," %}
                {% for i in (0..11) %}
                  {% assign selectMonth = species.month_vec[i] %}
                  {% if selectMonth==1 %}
                  <div class="px-2 py-1 text-white" style="background-color: {{family.color}}">{{ months[i] }}</div>
                  {% else %}
                  <div class="px-2 py-1">{{ months[i] }}</div>
                  {% endif %}
                {% endfor %}
            </div>

          </div>
        </div>
      </section>

      <div class="row">

        <div class="col-lg-auto order-lg-12 sidebar">
          <div class="spsize-compare">
            {% include spsizecompare.html species=species %}
          </div>
        </div>

        <div class="col species-profile-article">
          {{ content }}
        </div>
      </div>


    </article>
</div>

<div class="container-fluid p-0 d-lg-none">
  <div class="habitat-banner">
    <img class="img-fluid" src="../assets/img/icons/phyto-crop.jpeg" style="">
    <div class="div-overlay">
      {% for position in habitatPositions %}
      <i class="fa fa-circle" style="top:{{position[0]}}%; left:{{position[1]}}%; color: {{family.color}}cc;" ></i>
      {% endfor %}
    </div>
  </div>
</div>
